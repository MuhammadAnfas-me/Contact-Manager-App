<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login | Contact Manager</title>
  <link rel="stylesheet" href="login.css">
</head>
<body>
  
  <div class="login-container">
    <h1 class="title">Welcome Back</h1>
    <p class="subtitle">Login to manage your contacts</p>
     <% if(message){ %>
        <small style="color: green;"><%= message %></small>
      <% } %>
    <form action="/login" id="myForm" method="post" novalidate>
      <input type="text" id="name" name="username" placeholder="Username" required>
      <small id="nameError" style="color: red;"></small>
      <input type="password" id="password" name="password" placeholder="Password" required>
      <small id="passwordError" style="color: red;"></small>
      <% if(error){ %>
        <small style="color: red;"><%= error %></small>
      <% } %>
      
      <button type="submit" class="btn">Login</button>
    </form>

    <a href="#" class="forgot">Forgot Password?</a>
    <p class="signup">If you don't have account,
      <a href="/signup" style="text-decoration: none; color: #2f4f4f; font-weight: 600;">Create account</a></p>
  </div>
</body>
</html>

<script>
  document.addEventListener("DOMContentLoaded", function(){
    document.getElementById("myForm").addEventListener('submit' , formValidation);
  })

  function formValidation(e){
    e.preventDefault();
    const username = document.getElementById("name").value.trim()
    const password = document.getElementById("password").value.trim()

    const nameError = document.getElementById("nameError")
    const passwordError = document.getElementById("passwordError")

    nameError.textContent = ""
    passwordError.textContent = ""

    let isValid = true
    
    if(username === ""){
      nameError.textContent = "Please enter Username"
      isValid = false
    }
    if(password === ""){
      passwordError.textContent = "Please enter password"
      isValid = false
    }

    if(isValid){
      e.target.submit()
    }
  }
</script>